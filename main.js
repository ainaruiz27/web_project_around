!function(){"use strict";document.querySelector("#image-popup");var t={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inputErrorClass:"form__input_type_error",errorClass:"error-message",submitButtonState:{disabledClass:"your-submit-button-disabled-class"}},e=document.querySelector(".profile__avatar"),n=document.querySelector(".profile__overlay-button");function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}var u=function(){function t(e,n,r,o,i,u,a,c,l){var s=c._id,f=c.likes,p=c.owner,y=c.createAt;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._link=e,this._title=n,this._selector=r,this._handleCardClick=o,this._handleLike=i,this._handleRemoveLike=u,this._handleDeleteCard=a,this._id=s,this._likes=f,this._owner=p,this._createdAt=y,this._user=l}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){var t=document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0),e=t.querySelector(".card__image"),n=t.querySelector(".card__text"),r=t.querySelector(".card__like"),o=t.querySelector(".card__counter"),i=t.querySelector(".card__trash-icon");return n.textContent=this._title,e.src=this._link,e.alt=this._title,this.hasOwnerLike()&&r.classList.add("card__like_active"),o.textContent=this._likes.length,this._owner._id!==this._user._id&&(i.style.display="none"),t}},{key:"_setEventListeners",value:function(t){var e=this;t.querySelector(".card__image").addEventListener("click",(function(t){e._handleCardClick(e._link,e._title)}));var n=t.querySelector(".card__like"),r=t.querySelector(".card__counter"),o=t.querySelector(".card__trash-icon");n.addEventListener("click",(function(t){e.hasOwnerLike()?e._handleRemoveLike(e._id).then((function(t){e._likes=t.likes,n.classList.remove("card__like_active"),r.textContent=e._likes.length})):e._handleLike(e._id).then((function(t){e._likes=t.likes,n.classList.add("card__like_active"),r.textContent=e._likes.length}))})),o.addEventListener("click",(function(n){e._handleDeleteCard(e._id,t)}))}},{key:"hasOwnerLike",value:function(){var t=this;return this._likes.some((function(e){return e._id===t._user._id}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(this._element),this._element}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e,this._formElement=n,this._inputList=Array.from(n.querySelectorAll(this._config.inputSelector)),this._buttonElement=n.querySelector(this._config.submitButtonSelector),this._inputErrorClass=this._config.inputErrorClass,this._errorClass=this._config.errorClass,this._submitButtonState=this._config.submitButtonState,this._setEventListeners()}var e,n;return e=t,(n=[{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._handleInput(e)}))})),this._formElement.addEventListener("submit",(function(t){t.preventDefault()})),this._toggleButtonState()}},{key:"_handleInput",value:function(t){this._checkInputValidity(t),this._toggleButtonState()}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._submitButtonState.disabledClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._submitButtonState.disabledClass),this._buttonElement.disabled=!1)}},{key:"enableValidation",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._handleInput(e)}))})),this._toggleButtonState()}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:String(e)}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close-icon"),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("visible"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("visible"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._closeButton.addEventListener("click",(function(){return t.close()})),this._popup.addEventListener("click",(function(e){e.target.classList.contains("overlay")&&t.close()}))}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:String(e)}function d(t,e,n){return e=g(e),function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}function _(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_=function(){return!!t})()}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},S.apply(this,arguments)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}var k=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=d(this,e,[t]))._image=n._popup.querySelector(".popup__image"),n._caption=n._popup.querySelector(".popup__image-title"),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t){var n=t.src,r=t.alt;this._image.src=n,this._image.alt=r,this._caption.textContent=r,S(g(e.prototype),"open",this).call(this)}}])&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(v);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:String(e)}var C=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,n=[{key:"render",value:function(){var t=this;this._items.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this._container.prepend(t):this._container.append(t)}}],n&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function T(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==L(e)?e:String(e)}var q=function(){function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=n,this._jobElement=r,this._avatarElement=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._nameElement.textContent=e,this._jobElement.textContent=n}},{key:"setAvatar",value:function(t){this._avatarElement.src=t}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:String(e)}function x(t,e,n){return e=U(e),function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(e,n||[],U(t).constructor):e.apply(t,n))}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},D.apply(this,arguments)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}var z=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=x(this,e,[t]))._submitCallback=n,r._form=r._popup.querySelector(".form"),r._inputList=r._form.querySelectorAll(".form__input"),r._submitButton=r._form.querySelector(".form__button"),r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var t=this;D(U(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitButton.textContent="Guardando...",t._submitCallback(t._getInputValues()).finally((function(){t._submitButton.textContent="Guardar",t.close()}))}))}},{key:"close",value:function(){D(U(e.prototype),"close",this).call(this),this._form.reset()}}])&&I(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(v);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}function J(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:String(e)}var H=new(function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e,this._token=n}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return fetch(this._url+"/users/me",{headers:{Authorization:this._token}}).then((function(t){return t.json()}))}},{key:"getCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(t){return t.json()}))}},{key:"updateUser",value:function(t){var e=t.name,n=void 0===e?null:e,r=t.about,o=void 0===r?null:r,i=t.avatar,u=void 0===i?null:i,a={};return u?a.avatar=u:(a.name=n,a.about=o),fetch("".concat(this._url,"/users/me").concat(u?"/avatar":""),{headers:{authorization:this._token,"Content-Type":"application/json"},method:"PATCH",body:JSON.stringify(a)}).then((function(t){return t.json()}))}},{key:"addCard",value:function(t,e){return fetch("".concat(this._url,"/cards"),{headers:{Authorization:this._token,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({name:e,link:t})}).then((function(t){return t.json()}))}},{key:"deleteCard",value:function(t){return fetch(this._url+"/cards/"+t,{headers:{Authorization:this._token,"Content-Type":"application/json"},method:"DELETE"}).then((function(t){return t.json()}))}},{key:"addLike",value:function(t){return fetch(this._url+"/cards/likes/"+t,{headers:{Authorization:this._token,"Content-Type":"application/json"},method:"PUT"}).then((function(t){return t.json()}))}},{key:"removeLike",value:function(t){return fetch(this._url+"/cards/likes/"+t,{headers:{Authorization:this._token,"Content-Type":"application/json"},method:"DELETE"}).then((function(t){return t.json()}))}}])&&G(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())("https://around.nomoreparties.co/v1/web_es_11","e261a8b3-b4ff-46a8-9ab6-ef7a9f75bcee");function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K(r.key),r)}}function K(t){var e=function(t,e){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:String(e)}function Q(t,e,n){return e=Y(e),function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,W()?Reflect.construct(e,n||[],Y(t).constructor):e.apply(t,n))}function W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(W=function(){return!!t})()}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Y(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},X.apply(this,arguments)}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}function Z(t,e){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Z(t,e)}var $=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Q(this,e,[t]))._confirmButton=r._popup.querySelector(".popup__confirm-button"),r}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(e,t),n=e,(r=[{key:"setEventListeners",value:function(){var t=this;X(Y(e.prototype),"setEventListeners",this).call(this),this._confirmButton.addEventListener("click",(function(){t._handleConfirm(),t.close()}))}},{key:"open",value:function(t){X(Y(e.prototype),"open",this).call(this),this._handleConfirm=t}}])&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(v);console.log(n);var tt=document.querySelector(".form.form_profile"),et=document.querySelector(".profile__info-editbutton"),nt=document.querySelector(".profile__addbutton"),rt=document.querySelector("#name"),ot=document.querySelector("#profession"),it=document.querySelector(".form.form_place"),ut=document.querySelector(".form_edit-avatar"),at=document.querySelector(".profile__info-name"),ct=document.querySelector(".profile__info-work"),lt=new k("#image-popup"),st=new z("#profile__popup",(function(t){var e=t.name,n=t.about;return H.updateUser({about:n,name:e}).then((function(t){pt.setUserInfo({name:e,job:n})}))})),ft=new z("#add__popup",(function(t){var e=t.title,n=t.link;return H.addCard(n,e).then((function(t){var r=new u(n,e,".template-card",(function(t,e){lt.open({src:t,alt:e})}),(function(t){return H.addLike(t)}),(function(t){return H.removeLike(t)}),(function(t){return H.deleteCard(t)}),t,bt);mt.addItem(r.generateCard(),!1)}))})),pt=new q({nameSelector:at,jobSelector:ct,avatarSelector:e}),yt=new $("#confirmation-popup"),vt=new z("#edit-avatar-popup",(function(t){var e=t.newAvatarLink;return H.updateUser({avatar:e}).then((function(){pt.setAvatar(e)}))}));lt.setEventListeners(),st.setEventListeners(),ft.setEventListeners(),yt.setEventListeners(),vt.setEventListeners();var mt=null,bt=null;H.getUserInfo().then((function(t){bt=t,pt.setUserInfo({name:t.name,job:t.about}),pt.setAvatar(t.avatar),H.getCards().then((function(t){(mt=new C({items:t,renderer:function(t){var e=new u(t.link,t.name,".template-card",(function(t,e){lt.open({src:t,alt:e})}),(function(t){return H.addLike(t)}),(function(t){return H.removeLike(t)}),(function(t,e){console.log("borrar"),yt.open((function(){H.deleteCard(t).then((function(){e.remove()}))}))}),t,bt);mt.addItem(e.generateCard())}},".elements")).render()}))})),et.addEventListener("click",(function(){st.open(),rt.value=at.textContent.trim(),ot.value=ct.textContent.trim()})),nt.addEventListener("click",(function(){ft.open()})),n.addEventListener("click",(function(){vt.open()})),new s(t,tt).enableValidation(),new s(t,it).enableValidation(),new s(t,ut).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxFQUFRaUIsR0FDUHJDLFFBQVFDLElBQUksVUFDWjBCLEdBQXNCUixNQUNwQixXQUNFNUMsRUFBSWdELFdBQVdILEdBQVExSSxNQUFLLFdBQzFCMkosRUFBU3pKLFFBQ1gsR0FDRixHQUVKLEdBQ0FnRSxFQUNBMUcsSUFDRnNMLEdBQWFDLFFBQVFQLEVBQVFRLGVBQy9CLEdBQ0MsY0FDVVksUUFDZixHQUNGLElBd0NBbkMsR0FBUTNILGlCQUFpQixTQUFTLFdBQ2hDb0ksR0FBZ0JPLE9BQ2hCZCxHQUFVaEosTUFBUW9KLEdBQVk1SSxZQUFZMEssT0FDMUNqQyxHQUFnQmpKLE1BQVFxSixHQUFXN0ksWUFBWTBLLE1BQ2pELElBR0FuQyxHQUFXNUgsaUJBQWlCLFNBQVMsV0FDbkN3SSxHQUFnQkcsTUFDbEIsSUFHQTNMLEVBQWFnRCxpQkFBaUIsU0FBUyxXQUNyQ29KLEdBQVlULE1BQ2QsSUFFNkIsSUFBSWhJLEVBQWNwRSxFQUFZbUwsSUFDdENzQyxtQkFFUSxJQUFJckosRUFBY3BFLEVBQVl3TCxJQUN0Q2lDLG1CQUVPLElBQUlySixFQUFjcEUsRUFBWXlMLElBQ3RDZ0Msa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcclxuICAgIGFsdDogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkxhZ28gTG91aXNlXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICAgIGFsdDogXCJNb250YcOxYXMgQ2FsdmFzXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxyXG4gICAgYWx0OiBcIkxhdGVtYXJcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiLFxyXG4gICAgYWx0OiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFnby5qcGdcIixcclxuICAgIGFsdDogXCJMYWdvIGRpIEJyYWllc1wiXHJcbiAgfSxcclxuXTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3BVcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtcG9wdXBcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybUNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZXJyb3ItbWVzc2FnZVwiLFxyXG4gIHN1Ym1pdEJ1dHRvblN0YXRlOiB7XHJcbiAgZGlzYWJsZWRDbGFzczogXCJ5b3VyLXN1Ym1pdC1idXR0b24tZGlzYWJsZWQtY2xhc3NcIixcclxuICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGF2YXRhck5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fb3ZlcmxheS1idXR0b24nKTtcclxuIiwiaW1wb3J0IHsgaGFuZGxlTGlrZUljb24sIGhhbmRsZURlbGV0ZUNhcmQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3JcclxuICAgIChsaW5rLHRpdGxlLHNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2UsXHJcbiAgICAgICBoYW5kbGVSZW1vdmVMaWtlLCBoYW5kbGVEZWxldGVDYXJkLCBcclxuICAgICAgIHtfaWQsIGxpa2VzLCBvd25lcixjcmVhdGVBdH0sIHVzZXJcclxuICAgICAgICkge1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSA9IGhhbmRsZVJlbW92ZUxpa2U7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICB0aGlzLl9jcmVhdGVkQXQgPSBjcmVhdGVBdDtcclxuICAgIHRoaXMuX3VzZXIgPSB1c2VyO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgY29uc3QgaW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IHRpdGxlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RleHQnKTtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7ICAgIFxyXG4gICAgY29uc3QgY291bnRlck5vZGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NvdW50ZXJcIik7ICAgIFxyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1pY29uXCIpO1xyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIGltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBpbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIGlmKHRoaXMuaGFzT3duZXJMaWtlKCkpe1xyXG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBjb3VudGVyTm9kZS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIGlmKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlci5faWQpe1xyXG4gICAgICBkZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcbiBcclxuICBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMobm9kZSkge1xyXG4gICAgbm9kZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fdGl0bGUpO1xyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gbm9kZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XHJcbiAgICBjb25zdCBjb3VudGVyTm9kZSA9IG5vZGUucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jb3VudGVyXCIpO1xyXG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gbm9kZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWljb25cIik7XHJcblxyXG4gICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgaWYodGhpcy5oYXNPd25lckxpa2UoKSl7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzLl9pZCkudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSBjYXJkLmxpa2VzO1xyXG4gICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgY291bnRlck5vZGUudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSlcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSh0aGlzLl9pZCkudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZXMgPSBjYXJkLmxpa2VzO1xyXG4gICAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgY291bnRlck5vZGUudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcy5faWQsIG5vZGUpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhc093bmVyTGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXIuX2lkKVxyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9lbGVtZW50KTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdGhpcy5fY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU3RhdGUgPSB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU3RhdGU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUlucHV0KGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3N1Ym1pdEJ1dHRvblN0YXRlLmRpc2FibGVkQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TdGF0ZS5kaXNhYmxlZENsYXNzXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0KGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWljb24nKTsgICAgICBcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm92ZXJsYXlcIikpIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLXRpdGxlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgc3JjLCBhbHQgfSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gc3JjO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYWx0O1xyXG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGFsdDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuICBcclxuICAgIFxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICBcclxuICAgIFxyXG4gICAgYWRkSXRlbShlbGVtZW50LCBpbnNlcnRPblRvcCA9IHRydWUpIHtcclxuICAgICAgICBpZihpbnNlcnRPblRvcCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIFxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBuYW1lU2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBqb2JTZWxlY3RvcjtcclxuICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGF2YXRhclNlbGVjdG9yO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdmF0YXIoYXZhdGFyKXtcclxuICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKSB7XHJcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xyXG4gICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnV0dG9uJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAnR3VhcmRhbmRvLi4uJ1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xyXG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pOyAgICAgICAgICAgICAgICBcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgfVxyXG4gIH1cclxuIiwiY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHVybCwgdG9rZW4pIHtcclxuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICAgIH1cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL3VzZXJzL21lJywge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVVzZXIoe25hbWUgPSBudWxsLCBhYm91dCA9IG51bGwsIGF2YXRhciA9IG51bGx9KSB7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge307XHJcbiAgICAgICAgaWYoYXZhdGFyKXtcclxuICAgICAgICAgICAgcGFyYW1zLmF2YXRhciA9IGF2YXRhcjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcGFyYW1zLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICBwYXJhbXMuYWJvdXQgPSBhYm91dDsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUke2F2YXRhcj8gJy9hdmF0YXInOiAnJ31gLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH1cclxuLypcclxuICAgIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIFwiYXV0aG9yaXphdGlvblwiOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH0qL1xyXG5cclxuICAgIGFkZENhcmQobGluaywgdGl0bGUpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgbGluayxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGlkQ2FyZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBcIi9jYXJkcy9cIiArIGlkQ2FyZCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlrZShpZENhcmQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgXCIvY2FyZHMvbGlrZXMvXCIgKyBpZENhcmQsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaWtlKGlkQ2FyZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyBcIi9jYXJkcy9saWtlcy9cIiArIGlkQ2FyZCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExJywgJ2UyNjFhOGIzLWI0ZmYtNDZhOC05YWI2LWVmN2E5Zjc1YmNlZScpO1xyXG5cclxuLyogICBhZGRMaWtlKGlkQ2FyZCkge1xyXG4gICB9XHJcblxyXG4gICByZW1vdmVMaWtlKGlkQ2FyZCkge1xyXG4gICB9XHJcblxyXG4gICByZW1vdmVDYXJkKGlkQ2FyZCkge1xyXG5cclxuICAgfVxyXG5cclxuICAgdXBkYXRlVXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgfVxyXG5cclxuICAgdXBkYXRlQXZhdGFyKGxpbmspIHtcclxuICAgfSovXHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuICBcclxuXHJcbiBleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVDb25maXJtKSB7XHJcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgIFxyXG4gICAgICB0aGlzLl9jb25maXJtQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb25maXJtLWJ1dHRvbicpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybSgpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBvcGVuKGhhbmRsZUNvbmZpcm0pIHtcclxuICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gaGFuZGxlQ29uZmlybTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBmb3JtQ29uZmlnLCBhdmF0YXJOb2RlLCBidXR0b25BdmF0YXIgfSBmcm9tIFwiLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi91dGlscy9BcGkuanNcIjtcclxuaW1wb3J0ICcuL3BhZ2UvaW5kZXguY3NzJztcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuY29uc29sZS5sb2coYnV0dG9uQXZhdGFyKTtcclxuXHJcbmNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLmZvcm1fcHJvZmlsZVwiKTtcclxuY29uc3QgYnRuU2F2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mby1lZGl0YnV0dG9uXCIpO1xyXG5jb25zdCBidG5BZGRJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRidXR0b25cIik7XHJcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcclxuY29uc3QgaW5wdXRQcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9mZXNzaW9uXCIpO1xyXG5jb25zdCBmb3JtVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLmZvcm1fcGxhY2VcIik7XHJcbmNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fZWRpdC1hdmF0YXJcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLW5hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2luZm8td29ya1wiKTtcclxuY29uc3QgcG9wdXBPYmpJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI2ltYWdlLXBvcHVwJyk7XHJcbmNvbnN0IHBvcHVwT2JqUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjcHJvZmlsZV9fcG9wdXAnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdClcclxuY29uc3QgcG9wdXBPYmpBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNhZGRfX3BvcHVwJywgaGFuZGxlQWRkRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgbmFtZVNlbGVjdG9yOiBwcm9maWxlTmFtZSwgam9iU2VsZWN0b3I6IHByb2ZpbGVKb2IsIGF2YXRhclNlbGVjdG9yOiBhdmF0YXJOb2RlIH0pO1xyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcjY29uZmlybWF0aW9uLXBvcHVwJyk7XHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNlZGl0LWF2YXRhci1wb3B1cCcsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQgKTtcclxuXHJcbnBvcHVwT2JqSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBPYmpQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwT2JqQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmxldCBjYXJkc1NlY3Rpb24gPSBudWxsO1xyXG5cclxubGV0IHVzZXIgPSBudWxsO1xyXG5cclxuYXBpLmdldFVzZXJJbmZvKCkudGhlbihkYXRhVXNlciA9PiB7XHJcbiAgdXNlciA9IGRhdGFVc2VyO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IGRhdGFVc2VyLm5hbWUsXHJcbiAgICBqb2I6IGRhdGFVc2VyLmFib3V0XHJcbiAgfSlcclxuICB1c2VySW5mby5zZXRBdmF0YXIoZGF0YVVzZXIuYXZhdGFyKVxyXG4gIGFwaS5nZXRDYXJkcygpLnRoZW4oY2FyZHMgPT4ge1xyXG4gICAgY2FyZHNTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICBpdGVtczogY2FyZHMsXHJcbiAgICAgIHJlbmRlcmVyOiBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChpdGVtLmxpbmssIGl0ZW0ubmFtZSwgXCIudGVtcGxhdGUtY2FyZFwiLFxyXG4gICAgICAgICAgKGxpbmssIHRpdGxlKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwT2JqSW1hZ2Uub3Blbih7IHNyYzogbGluaywgYWx0OiB0aXRsZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICxcclxuICAgICAgICAgIC8qIGhhbmRsZUxpa2UgKi9cclxuICAgICAgICAgIChjYXJkSWQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaS5hZGRMaWtlKGNhcmRJZClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAvKiBoYW5kbGVSZW1vdmVMaWtlICovXHJcbiAgICAgICAgICAoY2FyZElkKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkucmVtb3ZlTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgLyogaGFuZGxlRGVsZXRlQ2FyZCAqL1xyXG4gICAgICAgICAgKGNhcmRJZCwgY2FyZE5vZGUpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2JvcnJhcicpXHJcbiAgICAgICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5vcGVuKCAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY2FyZE5vZGUucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7ICAgICAgICAgIFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGl0ZW0sXHJcbiAgICAgICAgICB1c2VyKTtcclxuICAgICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpKVxyXG4gICAgICB9XHJcbiAgICB9LCAnLmVsZW1lbnRzJyk7XHJcbiAgICBjYXJkc1NlY3Rpb24ucmVuZGVyKCk7XHJcbiAgfSk7XHJcbn0pXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCh7IG5hbWUsIGFib3V0IH0pIHtcclxuICByZXR1cm4gYXBpLnVwZGF0ZVVzZXIoe2Fib3V0LCBuYW1lfSkudGhlbih1c2VyID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgam9iOiBhYm91dCB9KTtcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KHsgdGl0bGUsIGxpbmsgfSkge1xyXG4gIHJldHVybiBhcGkuYWRkQ2FyZChsaW5rLCB0aXRsZSkudGhlbihjYXJkID0+IHtcclxuICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChsaW5rLCB0aXRsZSwgXCIudGVtcGxhdGUtY2FyZFwiLFxyXG4gICAgICAobGluaywgdGl0bGUpID0+IHtcclxuICAgICAgICBwb3B1cE9iakltYWdlLm9wZW4oeyBzcmM6IGxpbmssIGFsdDogdGl0bGUgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIC8qIGhhbmRsZUxpa2UgKi9cclxuICAgICAgKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBhcGkuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICAoY2FyZElkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcclxuICAgICAgfSxcclxuICAgIFxyXG4gICAgICAoY2FyZElkKSA9PiB7XHJcblxyXG4gICAgICAgIHJldHVybiBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpO1xyXG4gICAgICB9LFxyXG4gICAgICBjYXJkLFxyXG4gICAgICB1c2VyXHJcbiAgICApO1xyXG4gICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKSwgZmFsc2UpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoe25ld0F2YXRhckxpbmt9KSB7XHJcbiAgcmV0dXJuIGFwaS51cGRhdGVVc2VyKHthdmF0YXI6IG5ld0F2YXRhckxpbmt9KS50aGVuKCgpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldEF2YXRhcihuZXdBdmF0YXJMaW5rKTsgICAgXHJcbiAgfSlcclxufVxyXG5cclxuYnRuU2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwT2JqUHJvZmlsZS5vcGVuKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQudHJpbSgpO1xyXG4gIGlucHV0UHJvZmVzc2lvbi52YWx1ZSA9IHByb2ZpbGVKb2IudGV4dENvbnRlbnQudHJpbSgpO1xyXG59KTtcclxuXHJcblxyXG5idG5BZGRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcG9wdXBPYmpBZGRDYXJkLm9wZW4oKTtcclxufSk7XHJcblxyXG5cclxuYnV0dG9uQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxufSlcclxuXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JQcm9maWxlID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybVByb2ZpbGUpO1xyXG5mb3JtVmFsaWRhdG9yUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9yQWRkQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1VcmwpO1xyXG5mb3JtVmFsaWRhdG9yQWRkQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9yQXZhdGFyID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUF2YXRhcik7XHJcbmZvcm1WYWxpZGF0b3JBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJzdWJtaXRCdXR0b25TdGF0ZSIsImRpc2FibGVkQ2xhc3MiLCJhdmF0YXJOb2RlIiwiYnV0dG9uQXZhdGFyIiwiQ2FyZCIsImxpbmsiLCJ0aXRsZSIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJoYW5kbGVEZWxldGVDYXJkIiwiX3JlZiIsInVzZXIiLCJfaWQiLCJsaWtlcyIsIm93bmVyIiwiY3JlYXRlQXQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xpbmsiLCJfdGl0bGUiLCJfc2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2xpa2VzIiwiX293bmVyIiwiX2NyZWF0ZWRBdCIsIl91c2VyIiwia2V5IiwidmFsdWUiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJpbWFnZSIsImxpa2VCdXR0b24iLCJjb3VudGVyTm9kZSIsImRlbGV0ZUJ1dHRvbiIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiaGFzT3duZXJMaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwibGVuZ3RoIiwic3R5bGUiLCJkaXNwbGF5Iiwibm9kZSIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGhlbiIsImNhcmQiLCJyZW1vdmUiLCJfdGhpczIiLCJzb21lIiwibGlrZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hhbmRsZUlucHV0IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9jYWxsU3VwZXIiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsIl9pbmhlcml0cyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwibmFtZSIsImpvYiIsIl9yZWYyIiwiYXZhdGFyIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdENhbGxiYWNrIiwiX3N1Ym1pdENhbGxiYWNrIiwiX2Zvcm0iLCJfc3VibWl0QnV0dG9uIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsIl9nZXRJbnB1dFZhbHVlcyIsImZpbmFsbHkiLCJyZXNldCIsImFwaSIsIkFwaSIsInVybCIsInRva2VuIiwiX3VybCIsIl90b2tlbiIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJyZXNwb25zZSIsImpzb24iLCJfcmVmJG5hbWUiLCJfcmVmJGFib3V0IiwiYWJvdXQiLCJfcmVmJGF2YXRhciIsInBhcmFtcyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaWRDYXJkIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiaGFuZGxlQ29uZmlybSIsIl9jb25maXJtQnV0dG9uIiwiX2hhbmRsZUNvbmZpcm0iLCJjb25zb2xlIiwibG9nIiwiZm9ybVByb2ZpbGUiLCJidG5TYXZlIiwiYnRuQWRkSXRlbSIsImlucHV0TmFtZSIsImlucHV0UHJvZmVzc2lvbiIsImZvcm1VcmwiLCJmb3JtQXZhdGFyIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicG9wdXBPYmpJbWFnZSIsInBvcHVwT2JqUHJvZmlsZSIsInVwZGF0ZVVzZXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBPYmpBZGRDYXJkIiwiYWRkQ2FyZCIsIm5ld0NhcmQiLCJvcGVuIiwiY2FyZElkIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJkZWxldGVDYXJkIiwiY2FyZHNTZWN0aW9uIiwiYWRkSXRlbSIsImdlbmVyYXRlQ2FyZCIsInBvcHVwV2l0aENvbmZpcm1hdGlvbiIsInBvcHVwQXZhdGFyIiwiX3JlZjMiLCJuZXdBdmF0YXJMaW5rIiwic2V0QXZhdGFyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRVc2VySW5mbyIsImRhdGFVc2VyIiwiZ2V0Q2FyZHMiLCJjYXJkcyIsImNhcmROb2RlIiwicmVuZGVyIiwidHJpbSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9